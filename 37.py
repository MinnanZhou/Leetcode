def isvalid(nums, coordinate):
    a = ['1', '2', '3', '4', '5', '6', '7', '8', '9']
    for i in nums[coordinate[0]][:]:
        if i in a:
            a.remove(i)
    for i in [j[coordinate[1]] for j in nums]:
        if i in a:
            a.remove(i)
    for i in [[3 * (coordinate[0] // 3) + 0, 3 * (coordinate[1] // 3) + 0], [3 * (coordinate[0] // 3) + 0, 3 * (coordinate[1] // 3) + 1],
              [3 * (coordinate[0] // 3) + 0, 3 * (coordinate[1] // 3) + 2],
              [3 * (coordinate[0] // 3) + 1, 3 * (coordinate[1] // 3) + 0], [3 * (coordinate[0] // 3) + 1, 3 * (coordinate[1] // 3) + 1],
              [3 * (coordinate[0] // 3) + 1, 3 * (coordinate[1] // 3) + 2],
              [3 * (coordinate[0] // 3) + 2, 3 * (coordinate[1] // 3) + 0], [3 * (coordinate[0] // 3) + 2, 3 * (coordinate[1] // 3) + 1],
              [3 * (coordinate[0] // 3) + 2, 3 * (coordinate[1] // 3) + 2]]:
        if nums[i[0]][i[1]] in a:
            a.remove(nums[i[0]][i[1]])
    return a


def position(nums):
    pos = []
    for i in range(9):
        for j in range(9):
            if nums[i][j] == '.':
                pos.append([i, j])
    return pos


def func(nums, pos, n):
    if n == len(pos):
        return nums
    values = isvalid(nums, pos[n])
    if not values:
        return False
    else:
        for j in values:
            nums[pos[n][0]][pos[n][1]] = j
            ret = func(nums, pos, n + 1)
            if not ret:
                nums[pos[n][0]][pos[n][1]] = '.'
                continue
            elif ret:
                return nums
        return False
    pass


inp = [["5", "3", ".", ".", "7", ".", ".", ".", "."],
       ["6", ".", ".", "1", "9", "5", ".", ".", "."],
       [".", "9", "8", ".", ".", ".", ".", "6", "."],
       ["8", ".", ".", ".", "6", ".", ".", ".", "3"],
       ["4", ".", ".", "8", ".", "3", ".", ".", "1"],
       ["7", ".", ".", ".", "2", ".", ".", ".", "6"],
       [".", "6", ".", ".", ".", ".", "2", "8", "."],
       [".", ".", ".", "4", "1", "9", ".", ".", "5"],
       [".", ".", ".", ".", "8", ".", ".", "7", "9"]]
inp2 = [["8", "3", ".", ".", "7", ".", ".", ".", "."],
        ["6", ".", ".", "1", "9", "5", ".", ".", "."],
        [".", "9", "8", ".", ".", ".", ".", "6", "."],
        ["8", ".", ".", ".", "6", ".", ".", ".", "3"],
        ["4", ".", ".", "8", ".", "3", ".", ".", "1"],
        ["7", ".", ".", ".", "2", ".", ".", ".", "6"],
        [".", "6", ".", ".", ".", ".", "2", "8", "."],
        [".", ".", ".", "4", "1", "9", ".", ".", "5"],
        [".", ".", ".", ".", "8", ".", ".", "7", "9"]]
inp3 = [[".", "8", "7", "6", "5", "4", "3", "2", "1"],
        ["2", ".", ".", ".", ".", ".", ".", ".", "."],
        ["3", ".", ".", ".", ".", ".", ".", ".", "."],
        ["4", ".", ".", ".", ".", ".", ".", ".", "."],
        ["5", ".", ".", ".", ".", ".", ".", ".", "."],
        ["6", ".", ".", ".", ".", ".", ".", ".", "."],
        ["7", ".", ".", ".", ".", ".", ".", ".", "."],
        ["8", ".", ".", ".", ".", ".", ".", ".", "."],
        ["9", ".", ".", ".", ".", ".", ".", ".", "."]]
print(func(inp3, position(inp3), 0))